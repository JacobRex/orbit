!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../utils/dev-mode"),require("../utils/debug"),require("./Popover"),require("./Schooltip"),require("./Blade"));else if("function"==typeof define&&define.amd)define(["../utils/dev-mode","../utils/debug","./Popover","./Schooltip","./Blade"],t);else{var r="object"==typeof exports?t(require("../utils/dev-mode"),require("../utils/debug"),require("./Popover"),require("./Schooltip"),require("./Blade")):t(e["../utils/dev-mode"],e["../utils/debug"],e["./Popover"],e["./Schooltip"],e["./Blade"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(e,t,r,n,o){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=750)}({0:function(e,t,r){"use strict";t.a=function(e,t,r,n,o,i,s,a){var c,u="function"==typeof e?e.options:e;t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0);n&&(u.functional=!0);i&&(u._scopeId="data-v-"+i);s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):o&&(c=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o);if(c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}},1:function(t,r){t.exports=e},100:function(e,t){e.exports=n},137:function(e,t){e.exports=o},2:function(e,r){e.exports=t},28:function(e,t){e.exports=r},29:function(e,t){e.exports={fading:"ðŸš€0-1-03G3NM",transparent:"ðŸš€0-1-0dccSR"}},314:function(e,t,r){"use strict";var n=r(315);t.a=n.a},315:function(e,t,r){"use strict";var n=r(2),o=(r.n(n),r(28)),i=(r.n(o),r(137)),s=(r.n(i),r(100)),a=(r.n(s),r(33)),c=r(316),u=r(317);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={functional:!0,props:{component:{type:Object,required:!0},data:{type:Object,default:void 0}},render:(e,{props:t,data:r})=>e(t.component,d(d({},t.data),{},{class:r.class}))},y=Symbol("Layer");t.a={name:"OLayer",key:y,components:{FadeTransition:a.a,LayerMounter:f,OPopoverLayer:o.OPopoverLayer,OBladeLayer:i.OBladeLayer,OSchooltipLayer:s.OSchooltipLayer},mixins:[u.a,o.PopoverAPIProvider,i.BladeAPIProvider,s.SchooltipAPIProvider],props:{id:{type:null,required:!0}},data(){const e=this;return{settings:{position:null,background:"dark",cancelable:null,beforeClose:null,afterClose:null},state:{currentView:null,viewData:void 0},API:{isChildLayerOpen:!1,close:(...t)=>e.close(...t),configure(t){Object.assign(e.settings,t)}},clickSrc:0}},provide(){return{[y]:this.API}},inject:{parentLayer:{from:y,default:void 0}},computed:{isOpen(){return!!this.state.currentView},positionClasses(){const{position:e}=this.settings;if(!e)return null;const t=["top","center"];return e.split(" ").filter(e=>t.includes(e)).map(e=>this.$s["position_".concat(e)])}},watch:{"state.currentView":function(e){e?(this.parentLayer&&(this.parentLayer.isChildLayerOpen=!0),document.body.classList.add(this.$s.disable_scroll),document.addEventListener("keyup",this.handleEscKey),this.$emit("open")):(this.parentLayer&&(this.parentLayer.isChildLayerOpen=!1),document.body.classList.remove(this.$s.disable_scroll),document.removeEventListener("keyup",this.handleEscKey),this.$emit("close"))},id(e,t){c.b.delete(t),this.registerLayer()}},beforeMount(){this.registerLayer()},beforeDestroy(){this.isOpen&&this.close(),c.b.delete(this.id)},methods:{fromLayer(){this.clickSrc+=1},handleClick(){2===this.clickSrc&&this.settings.cancelable&&this.close(),this.clickSrc=0},registerLayer(){n.assert.error(!c.b.has(this.id),"Layer","Layer with id ".concat(String(this.id)," already exists")),c.b.set(this.id,this)},_close(e){return this.state.currentView=null,"function"==typeof this.settings.afterClose&&this.settings.afterClose(e),this.resetSettings(),e},close(e){return new Promise((t,r)=>{this.isOpen?"function"!=typeof this.settings.beforeClose?t(e):this.settings.beforeClose(e,(r=e)=>t(r),(t=e)=>r(t)):r()}).then(this._close)},handleEscKey(e){this.API.isChildLayerOpen||"Escape"!==e.key||this.close()},mountComponent(e,t){this.state.currentView&&Object(n.throwError)("Layer","Layer ".concat(this.id.toString()," is currently in use")),Object.assign(this.state,{currentView:e,viewData:t})},resetSettings(){this.settings={position:null,background:"dark",cancelable:null,beforeClose:null,afterClose:null}}},openInLayer:(e,...t)=>c.a.open.apply({layerId:e},t)}},316:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return s});var n=r(2);r.n(n);const o=new Map;function i(e){const t=o.get(e);return t||Object(n.throwError)("Layer",'Layer with id "'.concat(e.toString(),'" not found. Please check that a parent of your view has an a mountable layer. See the Layout docs for more information.')),t}const s={open(e,t){const r=i(this.layerId);return r.mountComponent(e,t),r},get isOpen(){return i(this.layerId).isOpen}}},317:function(e,t,r){"use strict";var n=r(316),o=r(318);t.a={data:()=>({layerKey:Symbol("layer")}),provide(){return"hasLayers"in this&&!this.hasLayers?{}:{[o.a]:Object.assign(Object.create(n.a),{layerId:this.layerKey})}}}},318:function(e,t,r){"use strict";const n=Symbol("LayerAPI");t.a=n},319:function(e,t){e.exports={Layer:"ðŸš€0-1-0iKamA",cancelable:"ðŸš€0-1-02Inp9",background_dark:"ðŸš€0-1-02-LDc",background_light:"ðŸš€0-1-02_Xcp",background_transparent:"ðŸš€0-1-01NqI2",position_top:"ðŸš€0-1-03a1du",position_center:"ðŸš€0-1-0Q9ar7",disable_scroll:"ðŸš€0-1-03AOAa",MountedComponent:"ðŸš€0-1-015-7Z"}},33:function(e,t,r){"use strict";var n=r(49),o=r(51),i=r(0);var s=Object(i.a)({},n.a,n.b,!0,function(e){this.$s=o.default.locals||o.default},null,null);t.a=s.exports},49:function(e,t,r){"use strict";var n=r(50);r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return n.b})},50:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(e,t){return(0,t._c)("transition",t._b({attrs:{"enter-active-class":t.$s.fading,"leave-active-class":t.$s.fading,"enter-class":t.$s.transparent,"leave-to-class":t.$s.transparent}},"transition",t.data.attrs,!1),[t._t("default")],2)},o=[]},51:function(e,t,r){"use strict";var n=r(29),o=r.n(n);r.d(t,"default",function(){return o.a})},750:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=(r.n(n),r(751)),i=r(317),s=r(318);r.d(t,"OLayer",function(){return o.a}),r.d(t,"LayerAPIProvider",function(){return i.a}),r.d(t,"LayerAPI",function(){return s.a})},751:function(e,t,r){"use strict";var n=r(752),o=r(314),i=r(754),s=r(0);var a=Object(s.a)(o.a,n.a,n.b,!1,function(e){this.$s=i.default.locals||i.default},null,null);t.a=a.exports},752:function(e,t,r){"use strict";var n=r(753);r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return n.b})},753:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return n("fade-transition",[t.state.currentView?n("div",{class:[t.$s.Layer,t.$s["background_"+t.settings.background],(e={},e[t.$s.cancelable]=t.settings.cancelable,e)],on:{mousedown:function(e){return e.target!==e.currentTarget?null:t.fromLayer(e)},mouseup:function(e){return e.target!==e.currentTarget?null:t.fromLayer(e)},click:function(e){return e.target!==e.currentTarget?null:t.handleClick(e)}}},[n("layer-mounter",{class:[t.$s.MountedComponent,t.positionClasses],attrs:{component:t.state.currentView,data:t.state.viewData}}),t._v(" "),n("o-blade-layer",{attrs:{id:t.bladeLayer}}),t._v(" "),n("o-popover-layer",{attrs:{id:t.popoverLayer}}),t._v(" "),n("o-schooltip-layer",{attrs:{id:t.schooltipLayer}}),t._v(" "),n("o-layer",{attrs:{id:t.layerKey}})],1):t._e()])},o=[]},754:function(e,t,r){"use strict";var n=r(319),o=r.n(n);r.d(t,"default",function(){return o.a})}})});
//# sourceMappingURL=Layer.js.map